<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">مدیریت و پشتیبانی</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <style>
        .btn-3d {
            transition: all 0.2s;
            transform: perspective(1000px) rotateX(0deg) rotateY(0deg);
            box-shadow: 0 8px 15px rgba(0,0,0,0.3);
        }
        .btn-3d:hover {
            transform: perspective(1000px) rotateX(-5deg) rotateY(5deg);
            box-shadow: 0 12px 20px rgba(0,0,0,0.4);
        }
        .btn-3d:active {
            transform: perspective(1000px) rotateX(2deg) rotateY(-2deg);
            box-shadow: 0 5px 10px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen flex flex-col">
    <div class="container mx-auto p-4">
        <div class="flex justify-end mb-4">
            <select id="languageSelect" onchange="changeLanguage()" class="btn-3d bg-gray-700 text-white p-2 rounded-lg">
                <option value="fa">فارسی</option>
                <option value="en">English</option>
                <option value="es">Español</option>
                <option value="fr">Français</option>
                <option value="de">Deutsch</option>
                <option value="ar">العربية</option>
                <option value="zh">中文</option>
                <option value="ru">Русский</option>
                <option value="pt">Português</option>
                <option value="ja">日本語</option>
            </select>
        </div>
        <button onclick="window.location.href='index.html'" id="btn-back" class="btn-3d bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg mb-4">✖ برگشت</button>
        <div id="adminPanel" class="hidden">
            <h1 id="admin-title" class="text-3xl font-bold mb-8 text-center">پنل مدیریت</h1>
            <div id="adminMessage" class="bg-blue-800 p-4 rounded-lg mb-4 hidden"></div>
            <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                <button onclick="showSection('sendMessage')" id="btn-send-message" class="btn-3d bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg">ارسال پیام همگانی</button>
                <button onclick="showSection('sendSignal')" id="btn-send-signal" class="btn-3d bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg">ارسال سیگنال</button>
                <button onclick="showSection('deleteAd')" id="btn-delete-ad" class="btn-3d bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg">حذف آگهی‌ها</button>
                <button onclick="showSection('approveReject')" id="btn-approve-reject" class="btn-3d bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg">تأیید و رد آگهی‌ها</button>
                <button onclick="showSection('stats')" id="btn-stats" class="btn-3d bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg">آمار کاربران و آگهی‌ها</button>
            </div>
            <div id="sendMessage" class="hidden mt-4">
                <textarea id="messageText" placeholder-id="placeholder-message" placeholder="پیام خود را وارد کنید" class="w-full p-2 bg-gray-700 rounded-lg"></textarea>
                <button onclick="sendMessage()" id="btn-submit-message" class="btn-3d bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg mt-2">ارسال</button>
            </div>
            <div id="sendSignal" class="hidden mt-4">
                <textarea id="signalText" placeholder-id="placeholder-signal" placeholder="سیگنال را وارد کنید" class="w-full p-2 bg-gray-700 rounded-lg"></textarea>
                <button onclick="sendSignal()" id="btn-submit-signal" class="btn-3d bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg mt-2">ارسال</button>
            </div>
            <div id="deleteAd" class="hidden mt-4">
                <div id="deleteAdList" class="space-y-4"></div>
            </div>
            <div id="approveReject" class="hidden mt-4">
                <div id="approveRejectList" class="space-y-4"></div>
            </div>
            <div id="stats" class="hidden mt-4">
                <p id="user-count-label">تعداد کاربران: <span id="userCount"></span></p>
                <p id="ad-count-label">تعداد آگهی‌ها: <span id="adCount"></span></p>
            </div>
        </div>
        <div id="supportPanel">
            <h1 id="support-title" class="text-3xl font-bold mb-8 text-center">پشتیبانی</h1>
            <p id="support-email">ایمیل پشتیبانی: milad.yari1377m@gmail.com</p>
            <textarea id="supportMessage" placeholder-id="placeholder-support" placeholder="پیام پشتیبانی خود را وارد کنید" class="w-full p-2 bg-gray-700 rounded-lg"></textarea>
            <button onclick="sendSupportMessage()" id="btn-submit-support" class="btn-3d bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg mt-2">ارسال</button>
        </div>
        <div id="loginPanel" class="bg-gray-800 p-6 rounded-lg">
            <h1 id="login-title" class="text-3xl font-bold mb-8 text-center">ورود مدیریت</h1>
            <input id="password" type="password" placeholder-id="placeholder-password" placeholder="رمز عبور" class="w-full p-2 bg-gray-700 rounded-lg mb-4">
            <button onclick="login()" id="btn-login" class="btn-3d bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg">ورود</button>
        </div>
    </div>
    <script>
        const hashedPassword = CryptoJS.SHA256('12345+!@#$%54321').toString();
        const translations = {
            fa: {
                'page-title': 'مدیریت و پشتیبانی',
                'admin-title': 'پنل مدیریت',
                'support-title': 'پشتیبانی',
                'login-title': 'ورود مدیریت',
                'btn-back': '✖ برگشت',
                'btn-send-message': 'ارسال پیام همگانی',
                'btn-send-signal': 'ارسال سیگنال',
                'btn-delete-ad': 'حذف آگهی‌ها',
                'btn-approve-reject': 'تأیید و رد آگهی‌ها',
                'btn-stats': 'آمار کاربران و آگهی‌ها',
                'btn-submit-message': 'ارسال',
                'btn-submit-signal': 'ارسال',
                'btn-submit-support': 'ارسال',
                'btn-login': 'ورود',
                'btn-approve': 'تأیید',
                'btn-reject': 'رد',
                'btn-delete': 'حذف',
                'placeholder-message': 'پیام خود را وارد کنید',
                'placeholder-signal': 'سیگنال را وارد کنید',
                'placeholder-support': 'پیام پشتیبانی خود را وارد کنید',
                'placeholder-password': 'رمز عبور',
                'support-email': 'ایمیل پشتیبانی: milad.yari1377m@gmail.com',
                'user-count-label': 'تعداد کاربران: ',
                'ad-count-label': 'تعداد آگهی‌ها: ',
                'alert-login-failed': 'رمز عبور اشتباه است.',
                'alert-message-sent': 'پیام همگانی با موفقیت ارسال شد.',
                'alert-signal-sent': 'سیگنال با موفقیت ارسال شد.',
                'alert-support-sent': 'پیام پشتیبانی با موفقیت ارسال شد.'
            },
            en: {
                'page-title': 'Management and Support',
                'admin-title': 'Management Panel',
                'support-title': 'Support',
                'login-title': 'Admin Login',
                'btn-back': '✖ Back',
                'btn-send-message': 'Send Broadcast Message',
                'btn-send-signal': 'Send Signal',
                'btn-delete-ad': 'Delete Ads',
                'btn-approve-reject': 'Approve/Reject Ads',
                'btn-stats': 'User and Ad Statistics',
                'btn-submit-message': 'Submit',
                'btn-submit-signal': 'Submit',
                'btn-submit-support': 'Submit',
                'btn-login': 'Login',
                'btn-approve': 'Approve',
                'btn-reject': 'Reject',
                'btn-delete': 'Delete',
                'placeholder-message': 'Enter your message',
                'placeholder-signal': 'Enter the signal',
                'placeholder-support': 'Enter your support message',
                'placeholder-password': 'Password',
                'support-email': 'Support Email: milad.yari1377m@gmail.com',
                'user-count-label': 'Number of Users: ',
                'ad-count-label': 'Number of Ads: ',
                'alert-login-failed': 'Incorrect password.',
                'alert-message-sent': 'Broadcast message sent successfully.',
                'alert-signal-sent': 'Signal sent successfully.',
                'alert-support-sent': 'Support message sent successfully.'
            },
            es: {
                'page-title': 'Gestión y Soporte',
                'admin-title': 'Panel de Gestión',
                'support-title': 'Soporte',
                'login-title': 'Inicio de Sesión Admin',
                'btn-back': '✖ Volver',
                'btn-send-message': 'Enviar Mensaje Masivo',
                'btn-send-signal': 'Enviar Señal',
                'btn-delete-ad': 'Eliminar Anuncios',
                'btn-approve-reject': 'Aprobar/Rechazar Anuncios',
                'btn-stats': 'Estadísticas de Usuarios y Anuncios',
                'btn-submit-message': 'Enviar',
                'btn-submit-signal': 'Enviar',
                'btn-submit-support': 'Enviar',
                'btn-login': 'Iniciar Sesión',
                'btn-approve': 'Aprobar',
                'btn-reject': 'Rechazar',
                'btn-delete': 'Eliminar',
                'placeholder-message': 'Ingresa tu mensaje',
                'placeholder-signal': 'Ingresa la señal',
                'placeholder-support': 'Ingresa tu mensaje de soporte',
                'placeholder-password': 'Contraseña',
                'support-email': 'Correo de Soporte: milad.yari1377m@gmail.com',
                'user-count-label': 'Número de Usuarios: ',
                'ad-count-label': 'Número de Anuncios: ',
                'alert-login-failed': 'Contraseña incorrecta.',
                'alert-message-sent': 'Mensaje masivo enviado con éxito.',
                'alert-signal-sent': 'Señal enviada con éxito.',
                'alert-support-sent': 'Mensaje de soporte enviado con éxito.'
            },
            fr: {
                'page-title': 'Gestion et Support',
                'admin-title': 'Panneau de Gestion',
                'support-title': 'Support',
                'login-title': 'Connexion Admin',
                'btn-back': '✖ Retour',
                'btn-send-message': 'Envoyer un Message Global',
                'btn-send-signal': 'Envoyer un Signal',
                'btn-delete-ad': 'Supprimer les Annonces',
                'btn-approve-reject': 'Approuver/Rejeter les Annonces',
                'btn-stats': 'Statistiques des Utilisateurs et Annonces',
                'btn-submit-message': 'Soumettre',
                'btn-submit-signal': 'Soumettre',
                'btn-submit-support': 'Soumettre',
                'btn-login': 'Connexion',
                'btn-approve': 'Approuver',
                'btn-reject': 'Rejeter',
                'btn-delete': 'Supprimer',
                'placeholder-message': 'Entrez votre message',
                'placeholder-signal': 'Entrez le signal',
                'placeholder-support': 'Entrez votre message de support',
                'placeholder-password': 'Mot de passe',
                'support-email': 'Email de Support: milad.yari1377m@gmail.com',
                'user-count-label': 'Nombre d\'Utilisateurs: ',
                'ad-count-label': 'Nombre d\'Annonces: ',
                'alert-login-failed': 'Mot de passe incorrect.',
                'alert-message-sent': 'Message global envoyé avec succès.',
                'alert-signal-sent': 'Signal envoyé avec succès.',
                'alert-support-sent': 'Message de support envoyé avec succès.'
            },
            de: {
                'page-title': 'Verwaltung und Support',
                'admin-title': 'Verwaltungspanel',
                'support-title': 'Support',
                'login-title': 'Admin-Login',
                'btn-back': '✖ Zurück',
                'btn-send-message': 'Massenachricht Senden',
                'btn-send-signal': 'Signal Senden',
                'btn-delete-ad': 'Anzeigen Löschen',
                'btn-approve-reject': 'Anzeigen Genehmigen/Ablehnen',
                'btn-stats': 'Nutzer- und Anzeigenstatistiken',
                'btn-submit-message': 'Absenden',
                'btn-submit-signal': 'Absenden',
                'btn-submit-support': 'Absenden',
                'btn-login': 'Einloggen',
                'btn-approve': 'Genehmigen',
                'btn-reject': 'Ablehnen',
                'btn-delete': 'Löschen',
                'placeholder-message': 'Geben Sie Ihre Nachricht ein',
                'placeholder-signal': 'Geben Sie das Signal ein',
                'placeholder-support': 'Geben Sie Ihre Supportnachricht ein',
                'placeholder-password': 'Passwort',
                'support-email': 'Support-E-Mail: milad.yari1377m@gmail.com',
                'user-count-label': 'Anzahl der Nutzer: ',
                'ad-count-label': 'Anzahl der Anzeigen: ',
                'alert-login-failed': 'Falsches Passwort.',
                'alert-message-sent': 'Massenachricht erfolgreich gesendet.',
                'alert-signal-sent': 'Signal erfolgreich gesendet.',
                'alert-support-sent': 'Supportnachricht erfolgreich gesendet.'
            },
            ar: {
                'page-title': 'الإدارة والدعم',
                'admin-title': 'لوحة الإدارة',
                'support-title': 'الدعم',
                'login-title': 'تسجيل دخول الإدارة',
                'btn-back': '✖ رجوع',
                'btn-send-message': 'إرسال رسالة جماعية',
                'btn-send-signal': 'إرسال إشارة',
                'btn-delete-ad': 'حذف الإعلانات',
                'btn-approve-reject': 'الموافقة/رفض الإعلانات',
                'btn-stats': 'إحصائيات المستخدمين والإعلانات',
                'btn-submit-message': 'إرسال',
                'btn-submit-signal': 'إرسال',
                'btn-submit-support': 'إرسال',
                'btn-login': 'تسجيل الدخول',
                'btn-approve': 'الموافقة',
                'btn-reject': 'رفض',
                'btn-delete': 'حذف',
                'placeholder-message': 'أدخل رسالتك',
                'placeholder-signal': 'أدخل الإشارة',
                'placeholder-support': 'أدخل رسالة الدعم',
                'placeholder-password': 'كلمة المرور',
                'support-email': 'البريد الإلكتروني للدعم: milad.yari1377m@gmail.com',
                'user-count-label': 'عدد المستخدمين: ',
                'ad-count-label': 'عدد الإعلانات: ',
                'alert-login-failed': 'كلمة المرور غير صحيحة.',
                'alert-message-sent': 'تم إرسال الرسالة الجماعية بنجاح.',
                'alert-signal-sent': 'تم إرسال الإشارة بنجاح.',
                'alert-support-sent': 'تم إرسال رسالة الدعم بنجاح.'
            },
            zh: {
                'page-title': '管理和支持',
                'admin-title': '管理面板',
                'support-title': '支持',
                'login-title': '管理员登录',
                'btn-back': '✖ 返回',
                'btn-send-message': '发送广播消息',
                'btn-send-signal': '发送信号',
                'btn-delete-ad': '删除广告',
                'btn-approve-reject': '批准/拒绝广告',
                'btn-stats': '用户和广告统计',
                'btn-submit-message': '提交',
                'btn-submit-signal': '提交',
                'btn-submit-support': '提交',
                'btn-login': '登录',
                'btn-approve': '批准',
                'btn-reject': '拒绝',
                'btn-delete': '删除',
                'placeholder-message': '输入您的消息',
                'placeholder-signal': '输入信号',
                'placeholder-support': '输入您的支持消息',
                'placeholder-password': '密码',
                'support-email': '支持电子邮件: milad.yari1377m@gmail.com',
                'user-count-label': '用户数量: ',
                'ad-count-label': '广告数量: ',
                'alert-login-failed': '密码错误。',
                'alert-message-sent': '广播消息发送成功。',
                'alert-signal-sent': '信号发送成功。',
                'alert-support-sent': '支持消息发送成功。'
            },
            ru: {
                'page-title': 'Управление и Поддержка',
                'admin-title': 'Панель Управления',
                'support-title': 'Поддержка',
                'login-title': 'Вход для Администратора',
                'btn-back': '✖ Назад',
                'btn-send-message': 'Отправить Общее Сообщение',
                'btn-send-signal': 'Отправить Сигнал',
                'btn-delete-ad': 'Удалить Объявления',
                'btn-approve-reject': 'Одобрить/Отклонить Объявления',
                'btn-stats': 'Статистика Пользователей и Объявлений',
                'btn-submit-message': 'Отправить',
                'btn-submit-signal': 'Отправить',
                'btn-submit-support': 'Отправить',
                'btn-login': 'Войти',
                'btn-approve': 'Одобрить',
                'btn-reject': 'Отклонить',
                'btn-delete': 'Удалить',
                'placeholder-message': 'Введите ваше сообщение',
                'placeholder-signal': 'Введите сигнал',
                'placeholder-support': 'Введите сообщение поддержки',
                'placeholder-password': 'Пароль',
                'support-email': 'Электронная почта поддержки: milad.yari1377m@gmail.com',
                'user-count-label': 'Количество пользователей: ',
                'ad-count-label': 'Количество объявлений: ',
                'alert-login-failed': 'Неверный пароль.',
                'alert-message-sent': 'Общее сообщение успешно отправлено.',
                'alert-signal-sent': 'Сигнал успешно отправлен.',
                'alert-support-sent': 'Сообщение поддержки успешно отправлено.'
            },
            pt: {
                'page-title': 'Gerenciamento e Suporte',
                'admin-title': 'Painel de Gerenciamento',
                'support-title': 'Suporte',
                'login-title': 'Login de Administrador',
                'btn-back': '✖ Voltar',
                'btn-send-message': 'Enviar Mensagem em Massa',
                'btn-send-signal': 'Enviar Sinal',
                'btn-delete-ad': 'Excluir Anúncios',
                'btn-approve-reject': 'Aprovar/Rejeitar Anúncios',
                'btn-stats': 'Estatísticas de Usuários e Anúncios',
                'btn-submit-message': 'Enviar',
                'btn-submit-signal': 'Enviar',
                'btn-submit-support': 'Enviar',
                'btn-login': 'Entrar',
                'btn-approve': 'Aprovar',
                'btn-reject': 'Rejeitar',
                'btn-delete': 'Excluir',
                'placeholder-message': 'Digite sua mensagem',
                'placeholder-signal': 'Digite o sinal',
                'placeholder-support': 'Digite sua mensagem de suporte',
                'placeholder-password': 'Senha',
                'support-email': 'E-mail de Suporte: milad.yari1377m@gmail.com',
                'user-count-label': 'Número de Usuários: ',
                'ad-count-label': 'Número de Anúncios: ',
                'alert-login-failed': 'Senha incorreta.',
                'alert-message-sent': 'Mensagem em massa enviada com sucesso.',
                'alert-signal-sent': 'Sinal enviado com sucesso.',
                'alert-support-sent': 'Mensagem de suporte enviada com sucesso.'
            },
            ja: {
                'page-title': '管理とサポート',
                'admin-title': '管理パネル',
                'support-title': 'サポート',
                'login-title': '管理者ログイン',
                'btn-back': '✖ 戻る',
                'btn-send-message': '一斉メッセージ送信',
                'btn-send-signal': 'シグナル送信',
                'btn-delete-ad': '広告削除',
                'btn-approve-reject': '広告の承認/拒否',
                'btn-stats': 'ユーザーと広告の統計',
                'btn-submit-message': '送信',
                'btn-submit-signal': '送信',
                'btn-submit-support': '送信',
                'btn-login': 'ログイン',
                'btn-approve': '承認',
                'btn-reject': '拒否',
                'btn-delete': '削除',
                'placeholder-message': 'メッセージを入力してください',
                'placeholder-signal': 'シグナルを入力してください',
                'placeholder-support': 'サポートメッセージを入力してください',
                'placeholder-password': 'パスワード',
                'support-email': 'サポートメール: milad.yari1377m@gmail.com',
                'user-count-label': 'ユーザーの数: ',
                'ad-count-label': '広告の数: ',
                'alert-login-failed': 'パスワードが間違っています。',
                'alert-message-sent': '一斉メッセージが正常に送信されました。',
                'alert-signal-sent': 'シグナルが正常に送信されました。',
                'alert-support-sent': 'サポートメッセージが正常に送信されました。'
            }
        };

        function changeLanguage() {
            const lang = document.getElementById('languageSelect').value;
            localStorage.setItem('language', lang);
            updateLanguage(lang);
            if (!document.getElementById('adminPanel').classList.contains('hidden')) {
                loadAdminSections();
            }
        }

        function updateLanguage(lang) {
            document.documentElement.lang = lang;
            document.documentElement.dir = lang === 'fa' || lang === 'ar' ? 'rtl' : 'ltr';
            const trans = translations[lang] || translations['fa'];
            Object.keys(trans).forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    if (id === 'page-title') {
                        document.title = trans[id];
                    } else if (id.includes('-label')) {
                        const textNode = element.childNodes[0];
                        if (textNode) textNode.textContent = trans[id];
                    } else {
                        element.textContent = trans[id];
                    }
                }
                const placeholderElement = document.querySelector(`[placeholder-id="${id}"]`);
                if (placeholderElement) {
                    placeholderElement.placeholder = trans[id];
                }
            });
        }

        function login() {
            const password = document.getElementById('password').value;
            const lang = localStorage.getItem('language') || 'fa';
            if (CryptoJS.SHA256(password).toString() === hashedPassword) {
                document.getElementById('loginPanel').classList.add('hidden');
                document.getElementById('adminPanel').classList.remove('hidden');
                document.getElementById('supportPanel').classList.add('hidden');
                loadAdminSections();
            } else {
                alert(translations[lang]['alert-login-failed'] || 'رمز عبور اشتباه است.');
            }
        }

        function showSection(section) {
            ['sendMessage', 'sendSignal', 'deleteAd', 'approveReject', 'stats'].forEach(s => {
                document.getElementById(s).classList.add('hidden');
            });
            document.getElementById(section).classList.remove('hidden');
        }

        function sendMessage() {
            const message = document.getElementById('messageText').value;
            localStorage.setItem('adminMessage', message);
            const lang = localStorage.getItem('language') || 'fa';
            const adminMessage = document.getElementById('adminMessage');
            adminMessage.innerHTML = `${translations[lang]['admin-message-label'] || 'پیام مدیریت: '} ${message}`;
            adminMessage.classList.remove('hidden');
            alert(translations[lang]['alert-message-sent'] || 'پیام همگانی با موفقیت ارسال شد.');
        }

        function sendSignal() {
            const signal = document.getElementById('signalText').value;
            const signals = JSON.parse(localStorage.getItem('signals') || '[]');
            signals.push(signal);
            localStorage.setItem('signals', JSON.stringify(signals));
            const lang = localStorage.getItem('language') || 'fa';
            alert(translations[lang]['alert-signal-sent'] || 'سیگنال با موفقیت ارسال شد.');
        }

        function loadAdminSections() {
            const sites = JSON.parse(localStorage.getItem('sites') || '[]');
            const lang = localStorage.getItem('language') || 'fa';
            const trans = translations[lang] || translations['fa'];
            const approveRejectList = document.getElementById('approveRejectList');
            const deleteAdList = document.getElementById('deleteAdList');
            approveRejectList.innerHTML = sites.map(s => `
                <div class="bg-gray-800 p-4 rounded-lg">
                    <h2 class="text-xl font-bold">${s.name}</h2>
                    <p>${s.description}</p>
                    <p>${trans['label-url'] || 'آدرس: '} ${s.url}</p>
                    <p>${trans['label-email'] || 'ایمیل: '} ${s.email}</p>
                    <p>${trans['label-phone'] || 'شماره: '} ${s.phone}</p>
                    <div class="flex space-x-2 mt-2">
                        <button onclick="approveSite('${s.name}')" class="btn-3d bg-green-600 hover:bg-green-700 text-white py-1 px-3 rounded">${trans['btn-approve']}</button>
                        <button onclick="rejectSite('${s.name}')" class="btn-3d bg-red-600 hover:bg-red-700 text-white py-1 px-3 rounded">${trans['btn-reject']}</button>
                    </div>
                </div>
            `).join('');
            deleteAdList.innerHTML = sites.filter(s => s.status === 'approved').map(s => `
                <div class="bg-gray-800 p-4 rounded-lg">
                    <h2 class="text-xl font-bold">${s.name}</h2>
                    <button onclick="deleteSite('${s.name}')" class="btn-3d bg-red-600 hover:bg-red-700 text-white py-1 px-3 rounded">${trans['btn-delete']}</button>
                </div>
            `).join('');
            document.getElementById('userCount').textContent = new Set(sites.map(s => s.email)).size;
            document.getElementById('adCount').textContent = sites.length;
            const adminMessage = localStorage.getItem('adminMessage');
            if (adminMessage) {
                document.getElementById('adminMessage').innerHTML = `${trans['admin-message-label'] || 'پیام مدیریت: '} ${adminMessage}`;
                document.getElementById('adminMessage').classList.remove('hidden');
            }
        }

        function approveSite(name) {
            let sites = JSON.parse(localStorage.getItem('sites') || '[]');
            const site = sites.find(s => s.name === name);
            site.status = 'approved';
            localStorage.setItem('sites', JSON.stringify(sites));
            loadAdminSections();
        }

        function rejectSite(name) {
            let sites = JSON.parse(localStorage.getItem('sites') || '[]');
            sites = sites.filter(s => s.name !== name);
            localStorage.setItem('sites', JSON.stringify(sites));
            loadAdminSections();
        }

        function deleteSite(name) {
            let sites = JSON.parse(localStorage.getItem('sites') || '[]');
            sites = sites.filter(s => s.name !== name);
            localStorage.setItem('sites', JSON.stringify(sites));
            loadAdminSections();
        }

        function sendSupportMessage() {
            const message = document.getElementById('supportMessage').value;
            const lang = localStorage.getItem('language') || 'fa';
            alert(translations[lang]['alert-support-sent'] || 'پیام پشتیبانی با موفقیت ارسال شد.');
            document.getElementById('supportMessage').value = '';
        }

        window.onload = () => {
            const savedLang = localStorage.getItem('language') || 'fa';
            document.getElementById('languageSelect').value = savedLang;
            updateLanguage(savedLang);
            if (window.location.hash === '#support') {
                document.getElementById('loginPanel').classList.add('hidden');
                document.getElementById('adminPanel').classList.add('hidden');
                document.getElementById('supportPanel').classList.remove('hidden');
            }
        };
    </script>
</body>
</html>